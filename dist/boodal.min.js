let boodal={_helpers:function(){this.genClass=function(){return"boodal-modal"};this.multiRequired=function(){return["title","body","options","ok.callback"]};this.inputRequired=function(){return["title","body","ok.callback"]};this.confirmDefaults=function(){return{ok:"OK","ok.class":"btn-primary",cancel:"Cancel","cancel.callback":function(){},"cancel.class":"btn-light","modal.backdrop":"static","modal.keyboard":false,"modal.focus":true,"modal.close":false,"modal-dialog.class":""}};this.alertDefaults=function(){return{ok:"OK","ok.callback":function(){},"ok.class":"btn-secondary","modal.backdrop":"static","modal.keyboard":false,"modal.focus":true,"modal-dialog.class":""}};this.multiFromMultiDefaults=function(){let v=this.singleFromMultiDefaults();v.vals=null;delete v.val;return v};this.inputDefaults=function(){return this.singleFromMultiDefaults()};this.singleFromMultiDefaults=function(){return{attrs:{},val:null,placeholder:null,ok:"OK","ok.class":"btn-primary",cancel:"Cancel","cancel.callback":function(){},"cancel.class":"btn-light",maxLength:null,"modal.backdrop":"static","modal.focus":true,"modal.close":true,"modal.dialog.class":""}};this.arrayToObjectForMulti=function(b){if(Array.isArray(b)===false){return b}let cleansed={};for(let i=0;i<b.length;i++){cleansed[b[i]]=b[i]}return cleansed};this.genId=function(){function b(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}return(b()+b()+b()+b()+b()+b()+b()+b()).toLowerCase()};this.isHtml=function(b){let a=document.createElement("div");a.innerHTML=b;for(let c=a.childNodes,i=c.length;i--;){if(c[i].nodeType===1){return true}}return false};this.requireKeys=function(b,f,d){for(let i=0;i<f.length;i++){let v=b[f[i]];if(typeof v==="undefined"||v===null){throw'boodal: Key of "'+f[i]+'" must be defined and cannot be empty'}}for(let k in d){if(d.hasOwnProperty(k)===false){continue}if(typeof b[k]==="undefined"||b[k]===null){b[k]=d[k]}}return b};this.buildModalOpts=function(b){return{backdrop:b["modal.backdrop"],keyboard:b["modal.keyboard"],focus:b["modal.focus"],show:b["modal.show"]}};this.resetModalEvents=function(b){let el=$("."+b);$("button.close",el).off("click");el.off("hide.bs.modal");el.off("hidden.bs.modal");el.off("show.bs.modal");el.off("shown.bs.modal")};this.boodalPlace=function(b,d){let o=this;let mm=$("<div />").addClass(b).addClass("modal fade").attr("tabindex","-1").attr("role","dialog");let md=$("<div />").addClass("modal-dialog").attr("role","document");if(typeof d["modal-dialog.class"]!=="undefined"&&d["modal-dialog.class"].length>0){md.addClass(d["modal-dialog.class"])}let mc=$("<div />").addClass("modal-content");let mh=$("<div />").addClass("modal-header").html($("<h5 />").addClass("modal-title").html(d.title));if(d["modal.close"]===true){mh.append($("<button />").addClass("close").attr("type","button").attr("data-dismiss","modal").attr("aria-label","Close").html($("<span />").attr("aria-hidden","true").html("&times;")))}if(!o.isHtml(d.body)){d.body=$("<p />").addClass("boodal-p").html(d.body)}mc.append(mh).append($("<div />").addClass("modal-body").html(d.body));let modalFooter=$("<div />").addClass("modal-footer pr-2 pt-2 pb-2 pl-2");if(d.ok!==null){let pos=$("<button />").attr("type","button").addClass("btn boodal-ok").addClass(d["ok.class"]).html(d.ok);modalFooter.append(pos)}if(d.cancel!==null){let neg=$("<button />").attr("type","button").addClass("btn").addClass("boodal-cancel").addClass(d["cancel.class"]).html(d.cancel).attr("data-dismiss","modal");modalFooter.prepend(neg)}mc.append(modalFooter);md.append(mc);mm.append(md);$("body").append(mm)};this.genericInput=function(d,b){let o=this;d=o._helpers().requireKeys(d,o.inputRequired(),o.inputDefaults());d["modal.keyboard"]=false;d["modal.show"]=true;let sel=o.genClass();o.boodalPlace(sel,d);let el=$("."+sel);let inputel;if(b==="textarea"){if(typeof d.rows==="undefined"){d.rows=4}inputel=$("<textarea />").addClass("form-control mb-0").addClass("boodal-input").attr("rows",d.rows)}else{inputel=$("<input />").attr("type",b).addClass("form-control mb-0").addClass("boodal-input")}if(d.val!==null){inputel.val(d.val)}if(typeof d.attrs["placeholder"]!=="undefined"){d.placeholder=d.attrs["placeholder"]}if(d.placeholder!==null){inputel.attr("placeholder",d.placeholder)}if(typeof d.attrs["class"]!=="undefined"){inputel.addClass(d.attrs["class"])}if(typeof d.attrs["id"]!=="undefined"){inputel.attr("id",d.attrs["id"])}if(typeof d.attrs["maxlength"]!=="undefined"){d.maxLength=d.attrs["maxlength"]}if(d.maxLength!==null){d.attrs["maxlength"]=d.maxLength}if(b==="date"&&typeof d.placeholder==="undefined"){inputel.attr("placeholder","YYYY-MM-DD")}let disallowedAttrs=["id","class","maxlength","placeholder"];for(let attrK in d.attrs){if(d.attrs.hasOwnProperty(attrK)===false){continue}if(disallowedAttrs.indexOf(attrK)===-1){inputel.attr(attrK,d.attrs[attrK])}}let hasMaxLength=false;if(typeof d.maxLength!=="undefined"&&d.maxLength!==null){inputel.attr("maxlength",d.maxLength);hasMaxLength=true}$(".modal-body",el).append(inputel);if(hasMaxLength===true){inputel.after('<span class="badge rounded-bottom badge-primary float-right mr-1 mt-1 boodalCharCounter">0 / '+d.maxLength+"</span>")}if(hasMaxLength===true){inputel.off("keyup").on("keyup",function(){let counter=$(".boodalCharCounter");counter.html(String(inputel.val().length)+" / "+d.maxLength);if(inputel.val().length>d.maxLength){counter.addClass("badge-danger");counter.removeClass("badge-primary");counter.removeClass("badge-success")}else{if(inputel.val().length===d.maxLength){counter.addClass("badge-success");counter.removeClass("badge-primary");counter.removeClass("badge-danger")}else{counter.addClass("badge-primary");counter.removeClass("badge-danger");counter.removeClass("badge-success")}}})}let input;if(b==="textarea"){input=$(".modal-body textarea.boodal-input",el)}else{input=$(".modal-body input.boodal-input",el)}el.on("shown.bs.modal",function(f){input.focus()});el.modal(o.buildModalOpts(d));o.resetModalEvents(sel);$("button.close",el).on("click",function(){d["ok.callback"]=function(){};inputel.off("keyup");$(".boodal-cancel",el).click()});el.on("hide.bs.modal",function(f){inputel.off("keyup")});el.on("hidden.bs.modal",function(){o.resetModalEvents(sel);let val=input.val();if(typeof val==="undefined"){val=null}else{if(val.length===0){val=null}}$("."+sel).remove();inputel.off("keyup");d["ok.callback"](val)});$(".boodal-ok",el).on("click",function(f){f.preventDefault();$("."+sel).modal("hide")});$(".boodal-cancel",el).on("click",function(f){f.preventDefault();el.off("hide.bs.modal");el.off("hidden.bs.modal");el.on("hidden.bs.modal",function(){$("."+sel).remove();d["cancel.callback"]();o._helpers().resetModalEvents(sel)});el.modal("hide")});inputel.trigger("keyup")};return this},alert:function(b){let o=this;b=o._helpers().requireKeys(b,["title","body"],o._helpers().alertDefaults());b["modal.show"]=true;b["cancel.callback"]=function(){};let sel=o._helpers().genClass();b.cancel=null;b["cancel.class"]=null;b["modal.close"]=false;o._helpers().boodalPlace(sel,b);let el=$("."+sel);el.modal(o._helpers().buildModalOpts(b));o._helpers().resetModalEvents(sel);el.on("hide.bs.modal",function(){});el.on("hidden.bs.modal",function(){o._helpers().resetModalEvents(sel);$("."+sel).remove();b["ok.callback"]()});$(".boodal-ok",el).on("click",function(d){d.preventDefault();$("."+sel).modal("hide")})},confirm:function(b){let o=this;b=o._helpers().requireKeys(b,["title","body","ok.callback"],o._helpers().confirmDefaults());b["modal.show"]=true;b["modal.close"]=false;b["modal.keyboard"]=false;let sel=o._helpers().genClass();o._helpers().boodalPlace(sel,b);let el=$("."+sel);el.modal(o._helpers().buildModalOpts(b));o._helpers().resetModalEvents(sel);el.on("hide.bs.modal",function(){});el.on("hidden.bs.modal",function(){o._helpers().resetModalEvents(sel);$("."+sel).remove();b["ok.callback"]()});$(".boodal-ok",el).on("click",function(d){d.preventDefault();$("."+sel).modal("hide")});$(".boodal-cancel",el).on("click",function(d){d.preventDefault();el.off("hide.bs.modal");el.off("hidden.bs.modal");el.on("hidden.bs.modal",function(){$("."+sel).remove();b["cancel.callback"]();o._helpers().resetModalEvents(sel)});$("."+sel).modal("hide")})},select:function(b){let o=this;b=o._helpers().requireKeys(b,o._helpers().multiRequired(),o._helpers().singleFromMultiDefaults());b["modal.keyboard"]=false;b["modal.show"]=true;let sel=o._helpers().genClass();o._helpers().boodalPlace(sel,b);let el=$("."+sel);let selEl=$("<select />").addClass("custom-select").addClass("boodal-select");if(b.placeholder!==null){selEl.append($("<option />").prop("disabled",true).prop("selected",true).html(b.placeholder))}if(typeof b.attrs["class"]!=="undefined"){selEl.addClass(b.attrs["class"])}if(typeof b.attrs["id"]!=="undefined"){selEl.attr("id",b.attrs["id"])}let possibles=o._helpers().arrayToObjectForMulti(b.options);for(let optK in possibles){if(possibles.hasOwnProperty(optK)===false){continue}let anOpt=$("<option />").attr("value",optK).html(possibles[optK]);if(b.val===optK){anOpt.prop("selected",true)}selEl.append(anOpt)}if(b.val!==null){$('option[value="'+b.val+'"]',selEl).prop("selected",true)}$(".modal-body",el).append(selEl);let select=$(".modal-body select.boodal-select",el);el.on("shown.bs.modal",function(d){select.focus()});el.modal(o._helpers().buildModalOpts(b));o._helpers().resetModalEvents(sel);$("button.close",el).on("click",function(){b["ok.callback"]=function(){};$(".boodal-cancel",el).click()});el.on("hide.bs.modal",function(){});el.on("hidden.bs.modal",function(){o._helpers().resetModalEvents(sel);let val=$("option:selected",select).attr("value");if(typeof val==="undefined"){val=null}else{if(val.length===0){val=null}}$("."+sel).remove();b["ok.callback"](val)});$(".boodal-ok",el).on("click",function(d){d.preventDefault();$("."+sel).modal("hide")});$(".boodal-cancel",el).on("click",function(d){d.preventDefault();el.off("hide.bs.modal");el.off("hidden.bs.modal");el.on("hidden.bs.modal",function(){$("."+sel).remove();b["cancel.callback"]();o._helpers().resetModalEvents(sel)});el.modal("hide")})},checkbox:function(b){let o=this;b=o._helpers().requireKeys(b,o._helpers().multiRequired(),o._helpers().multiFromMultiDefaults());if(!Array.isArray(b.vals)){b.vals=[]}b["modal.keyboard"]=false;b["modal.show"]=true;let sel=o._helpers().genClass();o._helpers().boodalPlace(sel,b);let el=$("."+sel);let possibles=o._helpers().arrayToObjectForMulti(b.options);for(let optK in possibles){if(possibles.hasOwnProperty(optK)===false){continue}let checkId="boodalCheck"+o._helpers().genId();let anOptCase=$("<div />").addClass("form-check");let anOptCheck=$("<input />").addClass("form-check-input").addClass("boodal-check").attr("type","checkbox").attr("value",optK).attr("id",checkId);if(typeof b.attrs["class"]!=="undefined"){anOptCheck.addClass(b.attrs["class"])}if(b.vals.indexOf(optK)!==-1){anOptCheck.prop("checked",true)}anOptCase.append(anOptCheck).append($("<label />").addClass("form-check-label").attr("for",checkId).html(possibles[optK]));$(".modal-body",el).append(anOptCase)}el.modal(o._helpers().buildModalOpts(b));o._helpers().resetModalEvents(sel);$("button.close",el).on("click",function(){b["ok.callback"]=function(){};$(".boodal-cancel",el).click()});el.on("hide.bs.modal",function(){});el.on("hidden.bs.modal",function(){o._helpers().resetModalEvents(sel);let checked=[];let elems=$(".boodal-check",$(".modal-body",el));for(let i=0;i<elems.length;i++){let e=$(elems[i]);if(e.is(":checked")){checked.push(e.attr("value"))}}if(checked.length===0){checked=null}$("."+sel).remove();b["ok.callback"](checked)});$(".boodal-ok",el).on("click",function(d){d.preventDefault();$("."+sel).modal("hide")});$(".boodal-cancel",el).on("click",function(d){d.preventDefault();el.off("hide.bs.modal");el.off("hidden.bs.modal");el.on("hidden.bs.modal",function(){$("."+sel).remove();b["cancel.callback"]();o._helpers().resetModalEvents(sel)});el.modal("hide")})},radio:function(b){let o=this;b=o._helpers().requireKeys(b,o._helpers().multiRequired(),o._helpers().singleFromMultiDefaults());b["modal.keyboard"]=false;b["modal.show"]=true;let sel=o._helpers().genClass();o._helpers().boodalPlace(sel,b);let el=$("."+sel);let radioName="boodalRadio"+o._helpers().genId();let possibles=o._helpers().arrayToObjectForMulti(b.options);let hasDef=false;for(let optK in possibles){if(possibles.hasOwnProperty(optK)===false){continue}let radioId="boodalCheck"+o._helpers().genId();let anOptCase=$("<div />").addClass("form-check");let anOptRadio=$("<input />").addClass("form-check-input").addClass("boodal-radio").attr("type","radio").attr("value",optK).attr("id",radioId).attr("name",radioName);if(typeof b.attrs["class"]!=="undefined"){anOptRadio.addClass(b.attrs["class"])}if(b.val===optK||b.val===null){if(hasDef===false){anOptRadio.prop("checked",true);hasDef=true}}anOptCase.append(anOptRadio).append($("<label />").addClass("form-check-label").attr("for",radioId).html(possibles[optK]));$(".modal-body",el).append(anOptCase)}el.modal(o._helpers().buildModalOpts(b));o._helpers().resetModalEvents(sel);$("button.close",el).on("click",function(){b["ok.callback"]=function(){};$(".boodal-cancel",el).click()});el.on("hide.bs.modal",function(d){});el.on("hidden.bs.modal",function(){o._helpers().resetModalEvents(sel);let val=$(".boodal-radio:checked",$(".modal-body",el)).attr("value");if(typeof val==="undefined"){val=null}else{if(val.length===0){val=null}}$("."+sel).remove();b["ok.callback"](val)});$(".boodal-ok",el).on("click",function(d){d.preventDefault();$("."+sel).modal("hide")});$(".boodal-cancel",el).on("click",function(d){d.preventDefault();el.off("hide.bs.modal");el.off("hidden.bs.modal");el.on("hidden.bs.modal",function(){$("."+sel).remove();b["cancel.callback"]();o._helpers().resetModalEvents(sel)});el.modal("hide")})},text:function(b){let o=this;o._helpers().genericInput(b,"text")},textarea:function(b){let o=this;o._helpers().genericInput(b,"textarea")},email:function(b){let o=this;o._helpers().genericInput(b,"email")},date:function(b){let o=this;o._helpers().genericInput(b,"date")},number:function(b){let o=this;o._helpers().genericInput(b,"number")}};